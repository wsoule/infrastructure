<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Gateway Demo</title>
</head>
<body>
    <h1>API Gateway Reverse Proxy Demo</h1>
    <p>All requests go through the API Gateway at <strong>http://localhost:8080</strong></p>
    <p>The gateway routes requests to the appropriate backend microservices:</p>
    <ul>
        <li><code>/api/users/*</code> → User Service (port 8081)</li>
        <li><code>/api/products/*</code> → Product Service (port 8082)</li>
    </ul>

    <hr>

    <h2>Gateway Health Check</h2>
    <div id="health-status">Loading health status...</div>

    <hr>

    <h2>Users (via API Gateway)</h2>
    <h3>All Users</h3>
    <div id="users-list">Loading users...</div>

    <h3>Create New User</h3>
    <form id="create-user-form">
        <label>Name: <input type="text" name="name" required></label><br>
        <label>Email: <input type="email" name="email" required></label><br>
        <button type="submit">Create User</button>
    </form>
    <div id="create-user-response"></div>

    <h3>Get User by ID</h3>
    <form id="get-user-form">
        <label>User ID: <input type="number" name="id" required></label>
        <button type="submit">Get User</button>
    </form>
    <div id="get-user-response"></div>

    <hr>

    <h2>Products (via API Gateway)</h2>
    <h3>All Products</h3>
    <div id="products-list">Loading products...</div>

    <h3>Create New Product</h3>
    <form id="create-product-form">
        <label>Name: <input type="text" name="name" required></label><br>
        <label>Description: <input type="text" name="description"></label><br>
        <label>Price: <input type="number" step="0.01" name="price" required></label><br>
        <label>Stock: <input type="number" name="stock" required></label><br>
        <button type="submit">Create Product</button>
    </form>
    <div id="create-product-response"></div>

    <h3>Get Product by ID</h3>
    <form id="get-product-form">
        <label>Product ID: <input type="number" name="id" required></label>
        <button type="submit">Get Product</button>
    </form>
    <div id="get-product-response"></div>

    <script type="module" src="/main.js"></script>
</body>
</html>
